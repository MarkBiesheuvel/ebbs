<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<textarea id="input" style="width:100%;height:400px">
loop(
  parallel(
    repeat(8,
      sample('hh')
    ),
    sequence(
      sample('bd'),
      sample('sn'),
      alternate(
        sample('bd'),
        repeat(2, sample('bd'))
      ),
      alternate(
        sample('sn'),
        repeat(2, sample('sn')),
        repeat(4, sample('sn'))
      )
    )
  )
)
</textarea>
<button id="play" style="width:100%;height:50px">Play</button>
<button id="stop" style="width:100%;height:50px">Stop</button>

<script src="dist/main.js"></script>
<script>

  var input = document.getElementById('input')
  var playButton = document.getElementById('play')
  var stopButton = document.getElementById('stop')

  preload('hh')
  preload('bd')
  preload('sn')
  preload('numbers:0')
  preload('numbers:1')
  preload('numbers:2')
  preload('numbers:3')
  preload('numbers:4')

  playButton.addEventListener('click', function () {
    var sound = eval(input.value)
    play(sound, 25, 0)
  })

  stopButton.addEventListener('click', function () {
    stop()
  })

</script>
</body>
</html>